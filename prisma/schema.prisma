// Prisma スキーマ定義
// ローカル: ローカルPostgreSQL / 本番: Google Cloud SQL for PostgreSQL

generator client {
  provider = "prisma-client-js"
  engineType = "library"
}

datasource db {
  provider = "postgresql"
}

// ユーザーアカウント
model User {
  id              String    @id @default(cuid())
  email           String    @unique
  passwordHash    String
  name            String
  company         String
  department      String
  position        String
  phone           String    // 2段階認証用携帯電話番号

  // 2段階認証
  twoFactorCode   String?
  twoFactorExpiry DateTime?
  twoFactorVerified Boolean @default(false) // 現セッションで2FA検証済みか

  // Googleカレンダー連携
  googleAccessToken  String?
  googleRefreshToken String?
  googleTokenExpiry  DateTime?
  calendarEnabled    Boolean @default(false)

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}
